<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Nous Contacter</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 400px; margin: 2rem auto; }
  #chat { border: 1px solid #ccc; padding: 1rem; height: 200px; overflow-y: auto; margin-bottom: 1rem; }
  .message { margin: 0.5rem 0; }
  .user { color: blue; }
  .bot { color: green; }
  #typing { font-style: italic; color: gray; }

  /* Style du pop-up */
  #popup {
    position: fixed;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    background: #111;
    color: white;
    padding: 15px;
    border-radius: 8px;
    max-width: 350px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    display: none;
    z-index: 999;
    font-size: 14px;
  }
  #popup button {
    background: crimson;
    color: white;
    border: none;
    padding: 5px 10px;
    margin-top: 10px;
    border-radius: 5px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h2>Envoyer un message</h2>
<h3>Si votre demande concerne l'ordre carré, merci d'indiquer l'année de réussite de l'experience et un spécialiste vous répondra.</h3>
<div id="chat"></div>

<input type="text" id="inputMessage" placeholder="Écris ton message..." autofocus />
<button id="sendBtn">Envoyer</button>

<!-- Pop-up -->
<div id="popup">
  Bravo ! Tu as découvert le secret derrière l'ordre carré, cependant, il reste encore des employés de nos jours, 
  ils se cachent et essayent de faire renaître l'organisation. 
  Ce sera à toi de les reconnaître ! Bonne chance pour la suite de ton aventure ! 
  En tout cas, tu n'auras plus besoin de ce site web, alors au revoir !
  <br>
  <button id="closePopup">Fermer</button>
</div>

<script>
  const chat = document.getElementById('chat');
  const input = document.getElementById('inputMessage');
  const sendBtn = document.getElementById('sendBtn');
  const popup = document.getElementById('popup');
  const closePopup = document.getElementById('closePopup');

  const secretCode = "2002"; // code secret à détecter
  const botReply = "D'accord je vais vous expliquer ce que l'on sait. L'ordre carré a été créé par un laboratoire anonyme. Ils ont inventé le sujet AYW-001 renommé Aywen ensuite, après des années de recherche pour créer l'humain parfait puis ils l'ont cloné pour en faire plusieurs versions. Cependant, malgré l'apparence n'ayant pas été altérée, ils se sont rendus compte que des variations apparaissaient, c'est pourquoi nous n'avons pas à ce jour 4 Aywens mais bien 4 personnes distinctes, avec une apparence similaire.";

  function addMessage(text, sender) {
    const div = document.createElement('div');
    div.classList.add('message', sender);
    div.textContent = text;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
  }

  sendBtn.addEventListener('click', sendMessage);
  input.addEventListener('keypress', (e) => {
    if(e.key === 'Enter') sendMessage();
  });

  closePopup.addEventListener('click', () => {
    popup.style.display = 'none';
  });

  function sendMessage() {
    const msg = input.value.trim();
    if(!msg) return;
    addMessage("Toi : " + msg, 'user');
    input.value = '';

    if(msg === secretCode) {
      const delayBeforeTyping = Math.random() * 2000 + 1000; // 1 à 3s

      setTimeout(() => {
        const typingDiv = document.createElement('div');
        typingDiv.id = "typing";
        typingDiv.textContent = "La personne est en train d'écrire...";
        chat.appendChild(typingDiv);
        chat.scrollTop = chat.scrollHeight;

        const typingDuration = Math.random() * 5000 + 10000; // 10 à 15s

        setTimeout(() => {
          typingDiv.remove();
          addMessage("[Paranormal Search] Joe : " + botReply, 'bot');

          // Pop-up après 5s
          setTimeout(() => {
            popup.style.display = 'block';
          }, 5000);

        }, typingDuration);

      }, delayBeforeTyping);
    }
  }
</script>

</body>
</html>
